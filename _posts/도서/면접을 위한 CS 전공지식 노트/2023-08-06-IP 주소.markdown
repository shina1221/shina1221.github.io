---
layout: post
title: IP 주소
date: 2023-08-06 19:20:23 +0900
category: CS
---
# 면접을 위한 CS 전공지식 노트  
> ARP

컴퓨터와 컴퓨터간의 통신은 IP 주소를 기반으로 하기보다 IP 주소에서 ARP를 통해 MAC 주소를 찾아   
MAC 주소를 기반으로 통신한다.  
ARP(Address Resolution Protocol)이란 IP조소로부터 MAC주소를 구하는 IP와 MAC 주소의 다리역할을 하는 프로토콜이다.  
ARP를 통해 가상 주소인 IP 주소(논리적 주소)를 실제 주소인 MAC 주소(물리적 주소)로 변환한다.  
PARP를 통해 실제 주소인 MAC 주소(물리적 주소)를 IP 주소(논리적 주소)로 변환하기도 한다.  
  
보내고자 하는 기기가 네트워크가 연결된 기기들 중에서 ARP Request 브로드캐스트를 보내 찾고자 하는 IP 주소의 MAC 주소를 찾는다.  
이후 해당 주소에 맞는 기기 X가 ARP reply 유니캐스트를 통해 MAC 주소를 반환하는 과정을 거쳐 IP 주소에 맞는 MAC 주소를 찾게된다.  
  
*브로드캐스트: 송신 호스트가 전송한 데이터가 네트워크에 연결된 모든 호스트에 전송되는 방식이다.  
*유니캐스트: 고유주소로 식별된 하나의 네트워크 목적지에 1대1로 데이터를 전송하는 방식이다.  
  
> 홉바이홉 통신  

IP주소를 통해 통신하는 과정을 홉바이홉(hop by hop)통신이라고 한다.  
홉이란 영어로 건너뛰는 모습을 의미하는데 이는 통신망에서 각 패킷이 여러개의 라우터를 건너가는 모습을  
비유적으로 표현한 것이다. 각각의 라우터에 있는 라우팅 케이블의 IP를 기반으로 패킷을 전달하고 다시 전달해간다.  
  
즉 통신 장치에 있는 라우팅 테이블의 IP를 통해 시작 주소부터 시작해 다음 IP로 계속해서 이동하는 라우팅 과정을 거쳐  
패킷이 최종 목적지까지 도달하는 통신을 말한다.  
*라우팅: IP 주소를 찾아가는 과정  
  
라우팅 테이블: 송신지에서 수신지까지 도달하기 위해 사용되며 라우터에 들어가 있는 목적지 정보들과 그 목적지로 가기 위한  
방법이 들어 있는 리스트를 의미한다. 라우팅 테이블에는 게이트웨이와 모든 목적지에 대해 해당 목적지에 도달하기 위해  
거쳐야할 다음 라우터의 정보를 가지고 있다.  
  
게이트웨이: 서로 다른 통신망, 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 관문 역할을 하는 컴퓨터나 SW이다.  
사용자는 인터넷에 접속하기 위해 게이트웨이를 거쳐야 한다. 게이트웨이는 서로 다른 네트워크상의 통신 프로토콜을 변환해주는  
역할을 수행하기도 한다.  
하위계층(1-3 layer)에서는 라우터가 게이트웨이 역할을 하고,  
상위계층(4-7 layer)에서 다른 프로토콜간의 변환을 수행한다.  
  
여기서 말하는 다른 네트워크란 무엇을 의미할까)  
집에서 인터넷에 접속하려한다면 집 > 공유기 > 인터넷을 제공하는 회사의 라우터 > 인터넷망을 거쳐야 하는데  
이때 공유기와 인터넷 제공 회사 라우터가 게이트웨이 역할을 수행한다.  
이때 거치는 게이트웨이의 수를 홉 수라고 한다. 현재 예시 기준으로 2가 된다.  
   
> IP 주소 체계  
IPv4  
32비트를 8비트 단위로 점을 찍어 표기하며 123.45.67.89 같은 방식으로 IP 주소를 나타낸다. 
표기법은 다음과 같다. 123.5.67.89.    
IPv6  
64비트를 16비트 단위로 점을 찍어 표기하며 2001:db8::ff00:42:8329같은 방식으로 IP 주소를 나타낸다.  
  
초기에 IP주소체계는 A,B,C,D,E 다섯개의 클래스로 구분하는 클래스 기반 할당 방식(CIDR)을 사용했다.    
앞에는 네트워크 주소 그 뒤에는 컴퓨터에 부여하는 주소인 호스트 주소를 두었다.  
클래스 A,B,C는 일대일 통신으로 사용했고 클래스 D는 멀티캐스트 통신, 클래스 E는 앞으로 사용할 예비용으로 쓰는 방식이다.  
         첫번째 바이트 두번째 바이트 세번째 바이트 네번째 바이트  
클래스 A 네트워크 주소 여기부터 호스트 주소               
클래스 B 네트워크 주소               여기부터 호스트 주소   
클래스 C 네트워크 주소                             여기부터 호스트 주소  
클래스 D 브로드캐스트용 주소(전체)  
클래스 E 예비용 주소(전체)  

구분비트를 통해 클래스가 나뉜다.    
네트워크의 첫번째 주소는 네트워크 주소로 사용되고 가장 마지막 주소는 브로드 캐스트용 주소로 네트워크에 속해있는  
모든 컴퓨터에 데이터를 보낼 때 사용한다.  
네트워크 구별 주소/ 컴퓨터에 부여할 수 있는 호스트 주소 /네트워크에 속해 있는 모든 컴퓨터에 데이터를 보내는 브로드캐스트 주소 순  
이 방식은 사용주소보다 버리는 주소가 많아 이를 해소하고자 DHCP와 IPv6, NAT가 나온다.  
  
> DHCP

IP주소 및 기타 통신 매개변수를 자동으로 할당하기 위한 네트워크 관리 프로토콜이다.  
이 기술을 토해 네트워크 장치의 IP 주소를 수동으로 설정할 필요없이 인터넷에 접속할 때마다 자동으로 IP주소를 할당할 수 있다.  
많은 라우터와 게이트웨이 장비에 DHCP 기능이 있다.  
  
> NAT  

패킷이 라우팅 장치를 통해 전송되는 동안 패킷의 IP 주소 정보를 수정해 IP 주소를 다른 주소로 매핑하는 방법이다.  
NAT 장치를 통해 사설 IP를 공인 IP로 변환하거나 공인IP를 사설 IP로 변환하는데 사용된다.  
IPv4 주소 체계만으로는 많은 주소들을 모두 감당하지 못하는 단점이 있는데, 이를 해결하기 위해 NAT로 공인 IP와 사설 IP로 나눠 많은  
주소를 처리한다. NAT를 가능하게 하는 소프트웨어로 ICS, RRAS, Netfilter 등이 있다.  
  
A,B,C는 192.168.0.xxx를 기반으로 각각의 다른 IP를 가지고 있다. 이를 사설 IP라고 한다.  
그리고 NAT 장치를 통해 하나의 공인 IP인 121.165.151.200으로 외부 인터넷에 요청할 수 있다.  
  
이를 통해 xx회사에 있는 A,B는 하나의 IP인 121.165.151.200을 기반으로 각각 다른 IP를 가지는 것처럼 인터넷을 사용할 수 있다.  
  
공인 IP는 전 세계에서 유일하지만 사설 IP는 하나의 네트워크안에서 유일하다.  
공인 IP는 외부 내부 상관없이 접근가능하지만 사설IP는 같은 대역의 사설 IP를 할당받은 내부에서만 접근이 가능하다.  
  
NAT를 사용하면 여러대의 호스트가 하나의 공인 IP 주소를 사용해 인터넷에 접속할 수 있다.  
예를 들어 인터넷 회선 하나를 개통해 인터넷 공유기를 달아 여러 PC를 연결해 사용할 수 있는대 이는 인터넷 공유기에  
NAT 기능이 탑재되어 있기 때문이다.  
또한 NAT를 사용하면 내부 네트워크에서 사용하는 IP 주소와 외부에 드러나는 IP 주소를 다르게 유지할 수 있기 때문에   
내부 네트워크에 대한 보안이 가능해진다. 하지만 동시에 여러명이 인터넷에 접속할 수 있게되므로 실제로 접속하는 호스트의  
숫자에 따라 접속 속도가 느려질 수 있다.   

RTT: 패킷이 목적지에 도달하고 나서 다시 출발지로 돌아오기까지 걸리는 시간이며 패킷 왕복 시간    
인코딩: 정보의 형태나 형식을 표준화, 보안, 처리 속도 향상, 저장 공간 절약 등을 위해 다른 형태나 형식으로 변환하는 처리 방식  
스트림: 시간이 지남에 따라 사용할 수 있게 되는 일련의 데이터 요소를 가리키는 데이터 흐름   
세션: 운영체제가 어떠한 사용자로부터 자신의 자산 이용을 허락하는 일정한 기간으로 사용자는 일정 시간동안  
응용 프로그램, 자원 등을 사용할 수 있다.  
  
참고 출처:  
https://melonicedlatte.com/network/2020/04/28/201100.html  
https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-IP-%EA%B8%B0%EC%B4%88-%EC%82%AC%EC%84%A4IP-%EA%B3%B5%EC%9D%B8IP-NAT-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A7%90-%EC%89%BD%EA%B2%8C-%EC%A0%95%EB%A6%AC  



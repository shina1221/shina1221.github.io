---
layout: post
title: 조절변수를 포함한 회귀모형_상호작용효과
date: 2023-09-16 19:21:23 +0900
category: statistics 
use_math: true
---      
조절변수를 포함한 회귀모형은 특정한 설명변수 X와 종속변수 Y간 관계의 방향이나 정도가 제3의 변수  
Z값에 따라 달라지는지 여부를 검증할 때 사용. 여기에 사용되는 변수 Z를 조절변수라고 한다.  
독립변수가 종속변수에 미치는 효과를 중간에서 조절하는 변수이다.  
<br>  
설명변수 X와 종속변수 Y간 관계의 크기나 방향이 조절변수 Z의 크기에 따라 유의한 수준으로  
달라질 때 해당 설명변수 X와 조절변수 Z 사이에 상호작용(혹은 교호작용)효과가 존재한다고 본다.  
ex) 개인 업무성과에 따른 급여격차가 클수록 조직의 성과가 높을 것이다(조절변수x)  
    개인 업무성과에 따른 급여격차가 조직성과에 미치는 긍정적 효과는 집단주의 문화권에서보다  
    개인주의 문화권에서 더 클 것이다. (조절변수 o)  
개인주의 문화권과 집단주의 문화권으로 구분한 더미변수(Z)가 조절변수가 된다.
<br>  
모집단 회귀방정식: $\widehat{Y}=\beta_0+\beta_1\cdot X+\beta_2\cdot X+\beta_3 \cdot XZ$  
대립가설: $\beta_3$는 0이 아닐 것이다.  
여기서 모집단 모수 $\beta_3$의 표본통계량인 $b_3$의 표본분포는 다중회귀모형에서 개별 독립변수의 회귀계수처럼 정규분포의 특성을 가진다.  
표본통계량을 표준화한 검증통계량  
$t=\frac{b_3}{SE}$  
확률분포는 표준정규분포대신 t분포(자유도=n-4)
<br>  
만약 대립가설이 채택될 경우(=문화권이 급여격차와 조직성과 간 관계의 크기를 설명한다.)  
모집단 회귀방정식을 설명변수 X의 함수로 재정렬   
$\widehat{Y}=(\beta_0+\beta_2 \cdot Z) + (\beta_1+\beta_3 \cdot Z) \cdot X$  
X의 회귀계수인 $(\beta_1+\beta_3 \cdot Z)$는 X가 한 단위 변화하는데 따른 $\widehat{Y}$의 변화량인  
한계효과(marginal effect)를 나타낸다.  
초점은 X가 $\widehat{Y}$에 미치는 한계효과가 특정한 값으로 정해지지 않고 Z값에 따라 변한다는 점이다.  
ex)Z가 1일 때와 2일 때 한계효과는 각각 $\beta_1+\beta_3$, $\beta_2+2\beta_3$가 된다.
<br>  
주 설명변수 X와 조절변수 Z, 그 둘을 곱해 만든 상호작용항 $X \cdot Z$를 회귀모형에 독립변수로  
포함시켜 상호작용항의 회귀계수 $\beta_3$이 통계적으로 유의한 수준에서 0과 다르다고 할 수  
있는지 여부인 **조절효과를 검증하고자 할 때 귀무가설을 기각하고 대립가설을 지지하는 결과를 얻기 힘들다.**  
이는 보통 상호작용항 $X \cdot Z$가 변수 X나 Z와 높은 상관관계를 가질 가능성이 높고,  
독립변수들 간 높은 상관관계를 가질 때 발생하는 다중공선성 문제로 표본회귀계수 $\beta_3$의 오차가 커지기 때문이다.  
그때문에 표본오차를 분모로 하는 검증통계치는 작아져 귀무가설 기각영역의 경계값을 넘어설 가능성이 낮아진다.
<br>  

> 해결책  

1.설명변수와 조절변수를 각각 편차점수(devision score)를 갖는 새로운 변수 $X_i-\overline{X}, Z_i-\overline{Z}$로 변환하고  
그것들간 상호작용항을 만들어 회귀분석에 사용한다.
<br>  
*다중공선성: 독립변수들 사이에 높은 상관관계가 존재할 때 발생한다.  
회귀모형에 포함된 독립변수들 사이에 다중공선성이 존재하면 상관관계가 높은 개별 독립변수들의  
종속변수에 미치는 영향을 분리해내기 어렵게 되고, 상관관계가 높은 독립변수들의 회귀계수  
표본분포의 표본오차가 커지는 문제가 발생한다.  
이는 검정통계량 공식의 분모가 커지며 검증통계치가 작아진다는 의미이다.  
= 검증통계치가 기각영역 경계값을 벗어난 값을 가질 가능성이 낮아진다는 의미  
그 결과 해당 독립변수에 대한 귀무가설을 기각하고 대립가설을 채택할 가능성 또한 그만큼 낮아진다.
<br>  
$VIF_i = {1 \over 1 - r_i} $  
$r_i$는 i번째 변수를 제외한 회귀식의 $R^2$
<br>  
*다중공선성 판별법  
-한 회귀모형 안에 포함된 독립변수들 사이의 상관계수가 +0.7이상 혹은 -0.7이하이면 다중공선성을 의심할 수 있다.  
-VIF(Variance inflation factor)가 10보다 크면(혹은 VIF의 역수인 tolerance가 0.1보다 작으면) 다중공선성을 의심해볼 수 있다.
<br>  

> 조절변수와 매개변수

독립변수는 스스로 종속변수에 영향을 미칠 수 있지만 조절, 매개변수는 종속변수에게 스스로 영향을 미치지 못한다.  
조절, 매개변수는 독립변수에 영향을 주거나 받아서 종속변수에 영향을 미친다.  
ex) 광고메세지 유형(이성적, 감성적)이 광고태도에 미치는 영향  
성별(여자,남자)에 따라 광고태도가 달라진다고 할때 성별은 조절변수가 된다.  
기존에 감성적 광고가 이성적 광고보다 광고태도가 더 높게 나타났을 경우 감성적 광고가 더 효과적이라고 볼 수 있을 것이다.  
하지만 성별을 조절변수로 두고 통계분석을 시행했을 때 남자는 이성적 광고에서 광고태도가 더 높게 나타나고,  
여자의 경우 감성적 광고에서 광고태도가 더 높게 나타났다면 성별이 조절변수가 되어  
연구결과가 달라질 수 있다.  
이런 조절변수로 인한 효과를 상호작용효과(조절효과)라고 한다.  
<br>  
조절변수는 독립변수와 종속변수 사이의 제2의 독립변수이다.  
매개변수: 부모의 사회경제적 지위(독립변수)에 따라 자녀의 교육(매개변수)에 영향을 미쳐  
부모의 사회경제적 지위는 자녀의 사회졍제적 지위(종속변수)에 영향을 미친다.  
이렇듯 매개변수는 독립변수와 종속변수 사이에서 중간다리 역할을 하며 인과관계를 보인다.   
<br>  
조절변수: 비만치료센터에서 두가지 다이어트 요법 A,B와 한 가지 운동 프로그램을 통해 치료를 진행한다.  
이 때 고객이 다이어트만 해서 A,B의 감소효과는 없었으나,  
운동 프로그램과 결합했을 때 다이어트 A보다 B에서 감소효과가 더 나타났다고 할 때  
운동프로그램은 다이어트 프로그램의 효과를 조절한다고 볼 수 있다.  
고객의 연령, 성별에 따라 다이어트 효과가 차별적으로 나타날 경우 연령 혹은 속성이 조절변수가 된다.
<br>  

> 매개변수

변수들 간 함수적 관계를 설명할 때 독립변수와 종속변수 두 변수 사이를 연계하는 변인이다.  
ex) 모바일 앱 품질요인이 사용자 재이용의도에 미치는 영향  
모바일 앱 품질요인이 재이용의도에 직접적인 영향을 미칠 수 있는데 만족도라는 매개변수를 통해 재이용의도에 영향을 미칠 수 있다.  
하지만 모바일 앱 품질이 좋아서 재이용의도가 높다고 해도, 해당 회사에 대한 만족도(서비스, 직원 친절도, 고객센터 등)가  
나쁘다면 재이용의도가 부정적으로 나타날 수도 있다.  
반대로 품질요인이 좋고 앱을 운영하는 회사의 만족도가 높다면 재이용의도가 더 긍정적으로 나타날 수 있다.
<br>  
독립변수-광고태도, 종속변수-구매의도, 매개변수-브랜드 충성도  
과정  
1번. 독립변수가 매개변수에 유의미한 영향을 미쳐야 한다.  
2번. 독립변수가 종속변수에 유의미한 영향을 미쳐야 한다.  
3번. 독립변수와 매개변수가 종속변수에 유의미한 영향을 미쳐야 한다.  
4번. 2번의 베타값이 3번의 베타값보다 높다면 매개효과가 있다고 본다.  
*베타값: 독립변수의 영향력으로 1에 가까울수록 영향력이 높다.
<br>  
**조절변수의 범주에 따라 결과가 다르게 나타나고 매개변수의 정도에 따라 결과가 다르게 나타난다.**
<br>  
**매개효과(부분 매개효과, 완전 매개효과)**  
부분 매개효과: 매개효과를 검증하는 3번에서 매개변수와 독립변수 모두 종속변수에 영향을 미친다.  
완전 매개효과: 매개효과를 검증하는 3번에서 독립변수는 종속변수에 영향을 미치지 않고 매개변수만 종속변수에 영향을 미친다.  
<br>  

> 소벨 테스트

앞서 매개효과가 있다고 나왔을 때 매개효과의 유의성을 검증해야 한다.  
이 때 소벨 테스트를 진행한다.  
소벨 테스트는   
1.독립변수와 매개변수간 유의미한 영향이 있는지  
2.(필요없음)
3.독립변수와 매개변수가 종속변수에 유의미한 영향이 있는지  
1번과 3번에서 나오는 비표준화 계수 중 B값과 표준오차를 통해 산출한다.
<br>  
이를 소벨테스트를 수행해 나온 값이 +1.96보다 크거나 -1.96보다 작으면 매개효과가 유의하다고 본다.  
[소벨테스트 링크]​(https://www.danielsoper.com/statcalc/calculator.aspx?id=31)  

> 조절변수

조절변수는 독립변수와 종속변수 중간에서 조절하는 변수이다.
<br>  
분산분석, Two-Way-ANOVA랑 조절회귀분석이랑 다른점은  
기본적으로 분산분석은 독립변수와 조절변수가 명목척도로 구성되어 있고,  
조절회귀분석은 독립변수와 조절변수가 등간척도로 구성되어 있다.  
<br>  
조절회귀분석  
독립변수-광고태도, 종속변수-구매의도, 조절변수-브랜드 충성도
<br>  
과정  
1단계 : 독립변수 -> 종속변수  
2단계 : 독립변수, 조절변수 -> 종속변수(통계적으로 유의한 영향을 미치지 않아도 상관없다)  
3단계 : 독립변수, 조절변수, 상호작용변수 -> 종속변수(2단계의 R제곱값이 3단계 R제곱값과 통계적으로 유의한 수준에서 증가하면 조절효과가 있다.  
R제곱값 증가분이 통계적으로 유의하면 상호작용항도 통계적으로 유의하다.)
<br>  
유의확률 F변화량을 보고 3단계에서 0.05보다 작아 유의미한 값이 나오는 점도 확인해야 한다. 또한 회귀모형의 유의확률도 확인해야 한다.  
R제곱 변화량이 2단계에서 유의미하게 증가했을 때 브랜드 충성도는 독립변수인  
광고태도가  
종속변수인 구매의도에 미치는 영향을 조절하는 것을 확인할 수 있다고 볼 수 있다.  
하지만 다중공선성 VIF(분산팽창요인)지수를 확인해 10이 넘는다면 다중공선성 문제가  
존재한다고 보고 조절회귀분석을 진행하기에 적합하지 않다고 본다.  
이는 평균중심화로 해결할 수 있다.  
*평균중심화: 독립변수와 조절변수의 평균값을 구해 각각의 변수에서 평균값을 빼 변수를 변환해준다.  
이후 새롭게만든 상호작용 변수를 투입해 조절회귀 분석을 진행한다.  
마찬가지로 R제곱값의 증가량과 유의확률 F변화량을 통해 유의미한 수준에서 결정계수가 증가함을 확인한다.  
분산분석에서도 다중공선성문제가 발생했는지를 확인한다.    
<br>  
유사 조절변수: 3단계에서 상호작용변수가 통계적으로 유의하고 조절변수도 유의할 경우이다. 
순수 조절변수: 상호작용 변수가 통계적으로 유의하지만 조절변수가 통계적으로 유의하지 않은 경우이다.  
<br>  
참고출처:  
https://m.blog.naver.com/malklum/221331342246  
https://m.blog.naver.com/malklum/221311264061  
https://m.blog.naver.com/malklum/221311672000  
https://m.blog.naver.com/malklum/221331691928  
https://blog.naver.com/malklum/220901906299  
https://wiseinvestor.tistory.com/57  
https://eda-ai-lab.tistory.com/410  
https://bookdown.org/max/FES/detecting-interaction-effects.html  
